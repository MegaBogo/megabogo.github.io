*MS에서 기재된 내용입니다.*
# 게층
웹 애플리케이션은 **다섯가지 계층**으로 일반화되어 적용된다.

1. 프리젠테이션 계층 (Presentation Layer)
1. 제어 계층 (Controller Layter)
1. 비즈니스 로직 계층 (Business Logic Layer)
1. 퍼시스턴스 계층 (Persistence Layer)
1. 도메인 모델 게층(Domain Model Layer)

### 프리젠테이션 계층
손님에게 메뉴판과 전달된 음식을 차려놓은 식탁


### 제어 계층
지배인과 역할과 종업원의 역할을 병행

### 비즈니스 로직 계층
주문받은 요리를 만들어서 전달하는 것. 

### 퍼시스턴스 계층
주방장이 사용할 재료를 담당하는 재료 담당자

### 도메인 계층
음식이 담긴 그릇
---

## 프리젠테이션 계층
사용자 인터페이스
(손님에게 메뉴판과 전달된 음식을 차려놓는 식탁)

### 기능 
- 사용자가 선택할 수 있는 기능이 표시
- 요청에 필요한 부가적인 정보 전달을 위한 입력 양식.
- 또한 전달된 자료를 효과적으로 보여주기 위한 프리젠테이션 로직이 포함.

단 비즈니스로직이나 퍼시스턴스 계층에서 처리하는 일을 직접 수행하거나 각 계층의 컴포넌트와 직접적인 통신은 X

모든 요청은 제어 계층을 통해 처리.
엔터프라이스 시스템은 지배인을 통해 요구를 전달하고 결과만 가져온다.

소규모는 직접 주방장에게 주문하거나 자기가 직업 요리한다.
(프로토 타입)

### 주료 패턴
Composite View

## 제어계층
프리젠테이션 계층과 비즈니스 로직 계층을 분리하기 위한 컨트롤러 제공
(지배인의 역할과 종업원의 역할을 병행)

###  기능
- 전체 시스템의 설정 상태를 유지.
- 어떤 요청이 들어왔을때 어떤 로직이 처리해야 하는지 결정

#### 예시
```
사용자 요청을 검증하고 로직에 요청을 전달하는 일과 로직에서 전달된 응답을 적절한 뷰에 연결짓는것 역시 제어 계층의 몫.

손님이 종업원에게 바다가재요리를 요청하면 
종업원이 바다가재 요리를 요리사에게 요청한다.
그러면 요리사는 바다가재 요리에 사용할 재료를 가져와서 요리를 하고 바다가재 요리를 종업원에게 전달하면
종업원은 바다가재 요리를 손님에게 제공한다.
```

제어계층은
UI검증, 요청 및 응답 전달, 로직에서 던져진 예외처리.
도메인 모델을 뷰와 연결하기 등의 공유 기능 외에는 어떤 기능도 포함 X

### 주요패턴
- Front Controller
- Service to Worker
- Intercepting Filter
- application
Context Object

## 비즈니스 로직 계층
- 핵심 업무를 어떻게 처리하는지에 대한 방법을 기술하는 곳

#### 예시
```
고객이 식당에 방문해서 메뉴판을 보고 종업원에게 주문을 한다.
종업원은 요리사에게 주문 내용을 전달하고 요리사는 재료를 가지고 요리를 한다.
완성된 요리를 종업원에게 전달하고 종업원은 완성된 요리를 가지고 고객에게 전달한다.
``` 

비즈니스 로직은 가장 **재사용**될 확률이 높은 요소이다.
그래서 신경써서 잘 설계해야 한다.

### 기능 
- 핵심 업무 로직의 구현과 그에 관련된 데이터의 적합성 검증 외에도 다양한 부가적인 구현이 추가.
- 트랜잭션 처리
- 다른 계층과 통신하기 위한 인터페이스 제공
- 해당 계층의 객체들간의 관계를 관리.

`
각각의 계층을 모호하게 만들면 유지보수시 많은 시간을 필요하게 만들기 때문에
각 계층에 맞는 설계를 해야한다.
`

프리젠테이션 계층과 퍼시스턴츠 계층 사이의 다리 역할을 충실히 하도록 함으로써 애플리케이션에 유연성을 더하는 것
스프링의 탄생 배경이다.

비즈니스 로직 구현을 크게 EJB사용, PoJO, IoC  사용이 있다.
비즈니스로직들을 체계적으로 관리하는 IoC 컨테이너에 대한 관심이 증가하는 추세

### 패턴
- Business Delegate
- Session Facade
- Service Locator
- Application Service
- EJB Home Factor


## 퍼시스턴스 계층
데이터 처리를 담당하는 계층
주로 CRUD연살을 수행
 
### 예시
```
주방장이 사용할 재료를 담당하는 재료 담당자.
``` 
주로 데이터 베이스에서 처리되는 경우가 많아,
**영속성**을 의미하는 퍼시스턴스 계층이라는 용어 사용.
 
### 기능 
- 관계형 정보를 저장하고 수정/삭제
- 그러한 일을 수행하는데 필요한 질의문을 관리.
- 그리고 가져온 관계형 정보를 객체화 시키는 일
 
### 대안기술
- ORM, JDBC를 이용한 DAO객체 구성
- EJB 3.0, JPO/하이버네이트
-JDBC를 이용한 POJO방식
 
 ### 주요패턴 
- Data Access Object
- Domain Store
- Sequence Blocks

## 도메인 모델 계층
각 계층 사이에 전달되는 실질적인 비즈니스 객체

### 예시
```
음식이 담긴 그릇
```
### 기능
- **데이터 전송 객체(DTO)**형태로 개발자가 직접 제작해서 리퀘스트나 세션과 같은 컨텍스트에 담아 넘기게 됨.

하지만 데이터 베이스의 모든 정보를 일일이 객체로 만드는 것은 귀찮을 분 아니라,
계층간의 통신 과정에서 데이터가 유실될 위험도 있기 때문에 최근에는 **도메인 모델**을 **서비스**로 제공하여 **자동화 **하는 경우가 많다.
 
### 주요패턴
- Data TransFer Objec
- Value List Handler
 
## 마치며
1. 각각의 계층은 제마다 분명한 역할이 존재한다.
그 역할을 충실히 수행할 수 많은 대안기술들 사이에서 개발자는 무엇을 선택할지 결정
1, 각각의 기술들은 독립적으로 충분한 가치를 지니고 잇지만 가장 장점을 발휘하는 제 위치에서 서로 연계되어 사용될 때 그 시너지 효과가 더욱 크다.
1. 약한 결합도를 가진 아키텍처 구성
 
 
 
 
 
 
 

