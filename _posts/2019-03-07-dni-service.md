---
title: DNI Service를 만들어 보고 싶다! (1)
date: 2019-03-08 15:08:00 -0400
tags: [DNI,일상,개발]
comments: true
---

요근래 지하철에서 한시간 이상 서있는 경우가 많았다.
그때마다 서있거나 앉아있었는데 계속 어디까지 왔지하며 밖을 쳐다보게 되었다.
(사람이 많으면 전광판이 잘 안보이는 경우도 종종 있었다.)

그 이유는 다들 알겠지만 "내릴 타이밍을 놓칠까봐."
그러다가 주위를 둘러보니 스마트폰을 하거나 책을 읽거나 잠을 자거나하는 사람들이 많이 보였다.
누구나 한번쯤은 딴짓을 하다가 허억!하면서 두리번하지 않았을까?

![Alt text](/assets/images/post-img-190308-1.jpg "프로필 사진") <br />
그래서 구상해봤던 SubwayAlarm Business Process Model의 일부.

![Alt text](/assets/images/post-img-190308-2.jpg "프로필 사진") <br />
AlarmReg Page
여기에서 여러가지 고민을 하게 되었다
1-1. 지하철 안에서 입력하는중 다음역으로 지나가버린다면?
- 출발역 클릭한 지점에서 Go누르기 까지 걸린 시간으로
대략 출발역이 변경되었습니까?라는 안내를 해서 승인하면 자동 변경해보자!

1-2. 만약 열차가 지연된다면?
입력한 출발역 그 다음역 둘다 표시
혹시 모르니 직접 입력할 수 도 있게 해보자!
(흘러간 시간으로 현재 위치한 역을 파악할 수 있게 해본다면?라는 생각이 잠깐 들었다.)

그러면 알림을 작성 완료한 시점에 위 조건을 충족하는 서비스를 구현해야한다.

- 기준을 무엇으로 잡아볼까?
처음 입력한 출발역부터 그다음역까지의 걸리는 시간을 측정하여
그 시간이 넘는다면 우선 출발역이 변경되었다고 판단한다.

{% highlight javascript linenos %}
if(시간이 넘는다면)
    출발역.변경안내서비스()
{% endhighlight %}    

하고 변경안내 서비스에는 출발역이 변경되었습니까?문구와
그 다음역, 직접선택은 문구 아래에 선택자로 표현하고
아니요는 버튼형태로 구성했다.

2. 자주 가는 역/경로는 매번 검색하기 귀찮지 않을까?
가끔 손가락으로 치기 귀찮을때가 있다.
말을 하면 텍스트로 나오는 세상! 
하지만 지하철에서 안양! 강남! 외치면 머쓱~?

역/경로 즐겨찾기가 필요하겠다!

3. 위치 안내 시간 단위 표시(?)
위치를 계속 파악을 하려고 하면 아무래도 데이터가 들지 않는가?
그래도 체크해줄때 좀 더 효율적으로 해줄 수 있는 방법이 있지 않을까?하는 생각이 든다.


![Alt text](/assets/images/post-img-190308-3.jpg "프로필 사진") <br />
AlarmViewPage
1. 설정한 시간 단위로 도착 예정 시간을 보여준다!

도착 예정 시간이 5분 남았을때
다와간다는 느낌을 주면 어떨까?

{% highlight javascript linenos %}
if(timeRemaining <=5)
    도착.안내서비스()
{% endhighlight %}    

2. 변경/일시정지/취소

마지막 문구는 "힘을 줄 수 있는 문구"로!

3. 만약 위치 안내 시간 단위가 적용한다면?
-> 현재 위치로 주변을 알 수 있는가?(조사)

AlarmPush

도착하면 푸쉬를 띄워주자!
지금 역을 확인해보라는 문구로!
그래서 도착 / 안내로 조건을 걸고 그 후 일들을 정리해보자!
도착 => 알림 종료

아직인 경우
=> 해결방법은..

#조사
1. 현재 위치로 주변을 알 수 있는가?
2014년도 기사를 보니 지하철 공공데이터를 막으려고 했던 사례가 있었다.
"사유 재산 주장하는 서울시… 업체들은 공공 정보는 개방돼야한다며 맞불"
민간 사업자 6명에게 지하철 앱의 실시간 도착 정보 서비스를 중단하라고 통보했엇다.
이들의 서비스가 불법으로 취득한 정보를 이용해 제공된다는 이유.
다운로드 수 상위권을 유지하는 앱 가운데 실시간 도착 정보를 제공하는 
지하철 정보 앱들이 대상이 됐다.

공공 : 국민 모두 혹은 사회 전체와 관련된 것

국민 모두가 관련된 공공데이터
그렇다면 국민은 이 데이터를 쓸 수 있지 않는가?
공공데이터는 개방하여야 한다고 생각한다.
그리고 이 데이터를 활용하여 보다 더 나은삶을 위해 쓰여야한다!

그리고 2019년 공공데이터포털에는 서울메트로 지하철정보를 제공하고 있다.
지하철 역 정보 및 지하철 일반 정보에 관한 데이터들!
역외부코드로 지하철역 위치조회와 역간 거리 및 소요시간을 제공해주고 있다.

그렇다면
현재 위치를 역외부코드로 변경해줘서 근처 지하철역 위치를 조회해주는 쪽으로 가야하는가?
...